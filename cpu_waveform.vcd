$date
	Sun Jan 25 22:17:51 2026
$end
$version
	Icarus Verilog
$end
$timescale
	1ps
$end
$scope module cpu_tb $end
$var wire 16 ! pc_out [15:0] $end
$var wire 1 " halt $end
$var wire 16 # alu_result [15:0] $end
$var reg 1 $ clk $end
$var reg 1 % reset $end
$scope module cpu $end
$var wire 16 & alu_operand_b [15:0] $end
$var wire 16 ' alu_result [15:0] $end
$var wire 1 $ clk $end
$var wire 1 % reset $end
$var wire 1 ( zero_flag $end
$var wire 1 ) use_imm $end
$var wire 2 * rs [1:0] $end
$var wire 1 + reg_write $end
$var wire 16 , reg_data2 [15:0] $end
$var wire 16 - reg_data1 [15:0] $end
$var wire 2 . rd [1:0] $end
$var wire 16 / pc_out [15:0] $end
$var wire 1 0 pc_load $end
$var wire 1 1 pc_enable $end
$var wire 4 2 opcode [3:0] $end
$var wire 1 3 mem_write $end
$var wire 1 4 mem_to_reg $end
$var wire 16 5 mem_read_data [15:0] $end
$var wire 1 6 ir_load $end
$var wire 16 7 instruction_from_mem [15:0] $end
$var wire 16 8 instruction [15:0] $end
$var wire 16 9 imm_extended [15:0] $end
$var wire 8 : imm [7:0] $end
$var wire 1 " halt $end
$var wire 16 ; alu_out [15:0] $end
$var wire 4 < alu_op [3:0] $end
$var wire 1 = alu_latch $end
$var reg 16 > alu_result_reg [15:0] $end
$var reg 16 ? instruction_reg [15:0] $end
$var reg 16 @ write_back_data [15:0] $end
$scope module alu_inst $end
$var wire 16 A operand_b [15:0] $end
$var wire 1 ( zero_flag $end
$var wire 16 B operand_a [15:0] $end
$var wire 4 C alu_op [3:0] $end
$var parameter 4 D ALU_ADD $end
$var parameter 4 E ALU_AND $end
$var parameter 4 F ALU_MOV $end
$var parameter 4 G ALU_NOT $end
$var parameter 4 H ALU_OR $end
$var parameter 4 I ALU_SHL $end
$var parameter 4 J ALU_SHR $end
$var parameter 4 K ALU_SUB $end
$var parameter 4 L ALU_XOR $end
$var reg 16 M result [15:0] $end
$upscope $end
$scope module ctrl_inst $end
$var wire 1 $ clk $end
$var wire 16 N instruction [15:0] $end
$var wire 1 % reset $end
$var wire 1 ( zero_flag $end
$var wire 4 O opcode [3:0] $end
$var parameter 4 P OP_ADD $end
$var parameter 4 Q OP_AND $end
$var parameter 4 R OP_HLT $end
$var parameter 4 S OP_JMP $end
$var parameter 4 T OP_JZ $end
$var parameter 4 U OP_LD $end
$var parameter 4 V OP_LDI $end
$var parameter 4 W OP_MOV $end
$var parameter 4 X OP_NOP $end
$var parameter 4 Y OP_NOT $end
$var parameter 4 Z OP_OR $end
$var parameter 4 [ OP_SHL $end
$var parameter 4 \ OP_SHR $end
$var parameter 4 ] OP_ST $end
$var parameter 4 ^ OP_SUB $end
$var parameter 4 _ OP_XOR $end
$var parameter 3 ` STATE_DECODE $end
$var parameter 3 a STATE_EXECUTE $end
$var parameter 3 b STATE_FETCH $end
$var parameter 3 c STATE_HALT $end
$var parameter 3 d STATE_MEMORY $end
$var parameter 3 e STATE_WRITEBACK $end
$var reg 1 = alu_latch $end
$var reg 4 f alu_op [3:0] $end
$var reg 1 " halt $end
$var reg 1 6 ir_load $end
$var reg 1 4 mem_to_reg $end
$var reg 1 3 mem_write $end
$var reg 3 g next_state [2:0] $end
$var reg 4 h opcode_reg [3:0] $end
$var reg 1 1 pc_enable $end
$var reg 1 0 pc_load $end
$var reg 1 + reg_write $end
$var reg 3 i state [2:0] $end
$var reg 1 ) use_imm $end
$upscope $end
$scope module dmem_inst $end
$var wire 1 $ clk $end
$var wire 16 j read_data [15:0] $end
$var wire 1 3 write_enable $end
$var wire 16 k write_data [15:0] $end
$var wire 16 l address [15:0] $end
$var integer 32 m i [31:0] $end
$upscope $end
$scope module imem_inst $end
$var wire 16 n instruction [15:0] $end
$var wire 16 o address [15:0] $end
$upscope $end
$scope module pc_inst $end
$var wire 1 $ clk $end
$var wire 1 1 pc_enable $end
$var wire 16 p pc_in [15:0] $end
$var wire 1 0 pc_load $end
$var wire 1 % reset $end
$var reg 16 q pc_out [15:0] $end
$upscope $end
$scope module regfile_inst $end
$var wire 1 $ clk $end
$var wire 2 r read_addr1 [1:0] $end
$var wire 2 s read_addr2 [1:0] $end
$var wire 16 t read_data1 [15:0] $end
$var wire 16 u read_data2 [15:0] $end
$var wire 1 % reset $end
$var wire 2 v write_addr [1:0] $end
$var wire 16 w write_data [15:0] $end
$var wire 1 + write_enable $end
$var integer 32 x i [31:0] $end
$upscope $end
$upscope $end
$upscope $end
$enddefinitions $end
$comment Show the parameter values. $end
$dumpall
b100 e
b11 d
b101 c
b0 b
b10 a
b1 `
b101 _
b10 ^
b1011 ]
b1000 \
b111 [
b100 Z
b110 Y
b0 X
b1111 W
b1001 V
b1010 U
b1101 T
b1100 S
b1110 R
b11 Q
b1 P
b101 L
b10 K
b1000 J
b111 I
b100 H
b110 G
b1111 F
b11 E
b1 D
$end
#0
$dumpvars
b100 x
b0 w
b0 v
b0 u
b0 t
b0 s
b0 r
b0 q
b0 p
b0 o
b1001000000000101 n
b100000000 m
b0 l
b0 k
b0 j
b0 i
b0 h
b1 g
b0 f
b0 O
b0 N
b0 M
b0 C
b0 B
b0 A
b0 @
b0 ?
b0 >
0=
b0 <
b0 ;
b0 :
b0 9
b0 8
b1001000000000101 7
16
b0 5
04
03
b0 2
11
00
b0 /
b0 .
b0 -
b0 ,
0+
b0 *
0)
1(
b0 '
b0 &
1%
0$
b0 #
0"
b0 !
$end
#5000
b100 x
1$
#10000
0$
#15000
b100 x
1$
#20000
0$
0%
#25000
b1001 <
b1001 C
b1001 f
b1001 2
b101 9
b101 p
b101 :
b1001 O
06
01
b10 g
b1001010000000011 7
b1001010000000011 n
b1001000000000101 8
b1001000000000101 ?
b1001000000000101 N
b1 i
b1 !
b1 /
b1 o
b1 q
1$
#30000
0$
#35000
1=
b1001 <
b1001 C
b1001 f
b100 g
b1001 h
b10 i
1$
#40000
0$
#45000
b101 @
b101 w
1)
1+
b0 <
b0 C
b0 f
0=
b0 g
b100 i
1$
#50000
0$
#55000
b0 @
b0 w
11
16
0)
0+
b1 g
b101 -
b101 B
b101 k
b101 t
b101 &
b101 A
b101 ,
b101 l
b101 u
b0 i
1$
#60000
0$
#65000
b0 -
b0 B
b0 k
b0 t
b1 .
b1 r
b1 v
b11 9
b11 p
b11 :
b1001 <
b1001 C
b1001 f
06
01
b10 g
b1000100000000 7
b1000100000000 n
b1001010000000011 8
b1001010000000011 ?
b1001010000000011 N
b1 i
b10 !
b10 /
b10 o
b10 q
1$
#70000
0$
#75000
1=
b1001 <
b1001 C
b1001 f
b100 g
b10 i
1$
#80000
0$
#85000
b11 @
b11 w
1)
1+
b0 <
b0 C
b0 f
0=
b0 g
b100 i
1$
#90000
0$
#95000
b0 @
b0 w
11
16
0)
0+
b1 g
b11 -
b11 B
b11 k
b11 t
b0 i
1$
#100000
0$
#105000
0(
b1000 #
b1000 '
b1000 ;
b1000 M
b1 2
b101 -
b101 B
b101 k
b101 t
b0 .
b0 r
b0 v
b11 &
b11 A
b11 ,
b11 l
b11 u
b1 *
b1 s
b0 9
b0 p
b0 :
b1 O
b1 <
b1 C
b1 f
06
01
b10 g
b1001100000000010 7
b1001100000000010 n
b1000100000000 8
b1000100000000 ?
b1000100000000 N
b1 i
b11 !
b11 /
b11 o
b11 q
1$
#110000
0$
#115000
1=
b1 <
b1 C
b1 f
b100 g
b1 h
b10 i
1$
#120000
0$
#125000
1(
b0 #
b0 '
b0 ;
b0 M
b1000 @
b1000 w
1+
b0 <
b0 C
b0 f
0=
b0 g
b1000 >
b100 i
1$
#130000
0$
#135000
11
16
0+
b1 g
b1000 -
b1000 B
b1000 k
b1000 t
b0 i
1$
#140000
0$
#145000
1(
b0 #
b0 '
b0 ;
b0 M
b1001 2
b0 -
b0 B
b0 k
b0 t
b10 .
b10 r
b10 v
b1000 &
b1000 A
b1000 ,
b1000 l
b1000 u
b0 *
b0 s
b10 9
b10 p
b10 :
b1001 O
b1001 <
b1001 C
b1001 f
06
01
b10 g
b10001000000000 7
b10001000000000 n
b1001100000000010 8
b1001100000000010 ?
b1001100000000010 N
b1 i
b100 !
b100 /
b100 o
b100 q
1$
#150000
0$
#155000
1=
b1001 <
b1001 C
b1001 f
b100 g
b1001 h
b10 i
1$
#160000
0$
#165000
b10 @
b10 w
1)
1+
b0 <
b0 C
b0 f
0=
b0 g
b0 >
b100 i
1$
#170000
0$
#175000
b0 @
b0 w
11
16
0)
0+
b1 g
b10 -
b10 B
b10 k
b10 t
b0 i
1$
#180000
0$
#185000
0(
b110 #
b110 '
b110 ;
b110 M
b10 2
b1000 -
b1000 B
b1000 k
b1000 t
b0 .
b0 r
b0 v
b10 &
b10 A
b10 ,
b10 l
b10 u
b10 *
b10 s
b0 9
b0 p
b0 :
b10 O
b10 <
b10 C
b10 f
06
01
b10 g
b1001110000000000 7
b1001110000000000 n
b10001000000000 8
b10001000000000 ?
b10001000000000 N
b1 i
b101 !
b101 /
b101 o
b101 q
1$
#190000
0$
#195000
1=
b10 <
b10 C
b10 f
b100 g
b10 h
b10 i
1$
#200000
0$
#205000
1(
b0 #
b0 '
b0 ;
b0 M
b110 @
b110 w
1+
b0 <
b0 C
b0 f
0=
b0 g
b110 >
b100 i
1$
#210000
0$
#215000
11
16
0+
b1 g
b110 -
b110 B
b110 k
b110 t
b0 i
1$
#220000
0$
#225000
1(
b0 #
b0 '
b0 ;
b0 M
b1001 2
b0 -
b0 B
b0 k
b0 t
b11 .
b11 r
b11 v
b110 &
b110 A
b110 ,
b110 l
b110 u
b0 *
b0 s
b1001 O
b1001 <
b1001 C
b1001 f
06
01
b10 g
b1011001100000000 7
b1011001100000000 n
b1001110000000000 8
b1001110000000000 ?
b1001110000000000 N
b1 i
b110 !
b110 /
b110 o
b110 q
1$
#230000
0$
#235000
1=
b1001 <
b1001 C
b1001 f
b100 g
b1001 h
b10 i
1$
#240000
0$
#245000
b0 @
b0 w
1)
1+
b0 <
b0 C
b0 f
0=
b0 g
b0 >
b100 i
1$
#250000
0$
#255000
11
16
0)
0+
b1 g
b0 i
1$
#260000
0$
#265000
b1011 2
b110 -
b110 B
b110 k
b110 t
b0 .
b0 r
b0 v
b0 &
b0 A
b0 ,
b0 l
b0 u
b11 *
b11 s
b1011 O
b1011 <
b1011 C
b1011 f
06
01
b10 g
b1110000000000000 7
b1110000000000000 n
b1011001100000000 8
b1011001100000000 ?
b1011001100000000 N
b1 i
b111 !
b111 /
b111 o
b111 q
1$
#270000
0$
#275000
1=
b1011 <
b1011 C
b1011 f
b11 g
b1011 h
b10 i
1$
#280000
0$
#285000
13
b0 <
b0 C
b0 f
0=
b100 g
b11 i
1$
#290000
0$
#295000
03
b0 g
b100 i
b110 5
b110 j
1$
#300000
0$
#305000
11
16
b1 g
b0 i
1$
#310000
0$
#315000
b0 5
b0 j
bx 7
bx n
b1110 <
b1110 C
b1110 f
06
01
b101 g
b1110 2
b110 &
b110 A
b110 ,
b110 l
b110 u
b0 *
b0 s
b1110 O
b1000 !
b1000 /
b1000 o
b1000 q
b1 i
b1110000000000000 8
b1110000000000000 ?
b1110000000000000 N
1$
#320000
0$
#325000
1"
b0 <
b0 C
b0 f
b1110 h
b101 i
1$
#326000
